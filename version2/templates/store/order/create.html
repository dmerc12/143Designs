{% extends "main/template.html" %}
{% block title %}
    <title>143 Designs - Create Order</title>
{% endblock title %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="content-section">
        <form method="POST" id="create-order-form" action="{% url 'store-order-create' %}">
            {% csrf_token %}
            <h1 class="border-bottom mb-4">Create Order</h1>
            <div class="form-group row mb-3">
                <div class="col-4 col-md-3 {% if order_form.name.required %}{{ order_form.required_css_class }}{% endif %}">
                    <label for="{{ order_form.name.id_for_label }}">{{ order_form.name.label }}</label>
                    {{ order_form.name.errors }}
                    {{ order_form.name }}
                </div>
                <div class="col-4 col-md-3 {% if order_form.complete.required %}{{ order_form.required_css_class }}{% endif %}">
                    <label for="{{ order_form.complete.id_for_label }}">{{ order_form.complete.label }}</label><br>
                    {{ order_form.complete.errors }}
                    {{ order_form.complete }}
                </div>
                <div class="col-4 col-md-3 {% if order_form.paid.required %}{{ order_form.required_css_class }}{% endif %}">
                    <label for="{{ order_form.paid.id_for_label }}">{{ order_form.paid.label }}</label><br>
                    {{ order_form.paid.errors }}
                    {{ order_form.paid }}
                </div>
            </div>
            <div class="form-group row mb-3 {% if order_form.description.required %}{{ order_form.required_css_class }}{% endif %}">
                <label for="{{ order_form.description.id_for_label }}">{{ order_form.description.label }}</label>
                {{ order_form.description.errors}}
                {{ order_form.description }}
            </div>
            {% if item_forms %}
                <h2>Items:</h2>
                {{ item_forms.management_form }}
                <div class="item-list">
                    {% for form in item_forms %}
                        {% include 'store/partials/form.html' %}
                    {% endfor %}
                </div>
            {% endif %}
            <div id='empty-form' style='display:none'>{{ item_forms.empty_form }}</div>
            <div class="form-group">
                <button type="button" 
                    class="btn btn-success" 
                    id="add-item-button"
                    hx-get="{% url 'store-order-create' %}" 
                    hx-trigger="click"
                    hx-swap="beforebegin">
                        Add Item
                </button>
            </div>
            <div class="form-group">
                <button class="btn btn-outline-info" 
                    type="submit"
                    id="create-order-button">
                        Create Order
                </button>
                <a class="btn btn-outline-secondary" 
                    href="{% url 'store-home' %}">
                        No, Cancel
                </a>
            </div>
        </form>
    </div>
{% endblock content %}
